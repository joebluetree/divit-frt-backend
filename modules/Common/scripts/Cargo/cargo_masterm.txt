CREATE TABLE IF NOT EXISTS cargo_masterm (
    mbl_id int4 GENERATED BY DEFAULT AS IDENTITY,
    mbl_cfno int4 NOT NULL,
    mbl_refno varchar(35) NOT NULL,
    mbl_ref_date date NULL,
    mbl_mode varchar(40) NULL,
    mbl_no varchar(60) NULL,
    mbl_date date NULL,
    mbl_agent_id int4 NULL,
    mbl_liner_id int4 NULL,
    mbl_liner_bookingno varchar(60) NULL,
    mbl_country_id int4 NULL,
    mbl_direct varchar(10) NULL,
    mbl_pol_id int4 NULL,
    mbl_pol_etd date NULL,
    mbl_pod_id int4 NULL,
    mbl_pod_eta date NULL,
    mbl_place_delivery varchar(60) NULL,     
    mbl_pofd_id int4 NULL,
    mbl_pofd_eta date NULL,
    mbl_vessel_id int4 NULL,
    mbl_vessel_name varchar(60) NULL,
    mbl_voyage varchar(60) NULL,
    mbl_frt_status_name varchar(60) NULL,
    mbl_ship_term_id int4 NULL,
    mbl_cntr_type varchar(60) NULL,
    mbl_telex_released varchar(10) NULL,
    mbl_it_no varchar(60) NULL,
    mbl_it_date date NULL,
    mbl_it_port varchar(60) NULL,
    mbl_cargo_loc_id int4 NULL,
    mbl_cargo_loc_name varchar(60) NULL,
    mbl_cargo_loc_add1 varchar(60) NULL,
    mbl_cargo_loc_add2 varchar(60) NULL,
    mbl_cargo_loc_add3 varchar(120) NULL,
    mbl_cargo_loc_add4 varchar(120) NULL,
    mbl_devan_loc_id int4 NULL,
    mbl_devan_loc_name varchar(60) NULL,
    mbl_devan_loc_add1 varchar(60) NULL,
    mbl_devan_loc_add2 varchar(60) NULL,
    mbl_devan_loc_add3 varchar(120) NULL,
    mbl_devan_loc_add4 varchar(120) NULL,
    mbl_by_carrier1 varchar(60) NULL,
    mbl_by_carrier2 varchar(30) NULL,
    mbl_by_carrier3 varchar(30) NULL,
    mbl_currency_id int4 NULL,
    mbl_to_port1 varchar(30) NULL,
    mbl_to_port2 varchar(30) NULL,
    mbl_to_port3 varchar(30) NULL,
    mbl_handled_id int4 NULL,
    mbl_is_held varchar(10) NULL,
    mbl_shipper_id int4 NULL,
    mbl_consignee_id int4 NULL,
    mbl_house_tot int4 NULL,
    mbl_teu numeric(5, 3) NULL,
    mbl_20 numeric(5, 3) NULL,
    mbl_40 numeric(5, 3) NULL,
    mbl_40hq numeric(5, 3) NULL,
    mbl_45 numeric(5, 3) NULL,
    mbl_pcs numeric(14, 3) NULL,
    mbl_weight numeric(14, 3) NULL,
    mbl_weight_lbs numeric(14, 3) NULL,
    mbl_chwt numeric(14, 3) NULL,
    mbl_chwt_lbs numeric(14, 3) NULL,
    mbl_cbm numeric(14, 3) NULL,
    mbl_cft numeric(14, 3) NULL,
    mbl_mawb_weight numeric(14, 3) NULL,
    mbl_mawb_chwt numeric(14, 3) NULL,
    mbl_inc_total numeric(14, 3) NULL,
    mbl_exp_total numeric(14, 3) NULL,
    mbl_revenue numeric(14, 3) NULL,
    mbl_type varchar(15) NULL,
    mbl_cntr_cbm numeric(14, 3) NULL,
    mbl_sub_houseno varchar(60) NULL,
    rec_files_attached varchar(10) NULL,
    mbl_per numeric(14, 3) NULL,
    mbl_container_tot int4 NULL,
    mbl_remarks varchar(50) NULL,
    mbl_lock varchar(10) NULL,
    mbl_shipper_tot int4 NULL,
    mbl_consignee_tot int4 NULL,
    mbl_zero_cbm int4 NULL,
    mbl_zero_chwt int4 NULL,
    mbl_zero_wt int4 NULL,
    mbl_profit_type varchar(15) NULL,
    mbl_jobtype_id int4 NULL,
    mbl_loss_approved varchar(10) NULL,
    mbl_loss_memo varchar(100) NULL,
    mbl_profit_req varchar(10) NULL,
    mbl_boeno varchar(60) NULL,
    mbl_shipment_stage_id int4 NULL,
    mbl_salesman_id int4 NULL,
    mbl_rotation_no varchar(60) NULL,
    mbl_status varchar(50) NULL,
    mbl_is_sea_waybill varchar(10) NULL,
    mbl_ombl_sent_on date NULL,
    mbl_pending_status varchar(10) NULL,
    mbl_unlock_date date NULL,
    mbl_ombl_sent_ampm varchar(2) NULL,
    mbl_book_slno int4 NULL,
    mbl_3rdparty varchar(10) NULL,
    mbl_isfadjust varchar(1) NULL,
    mbl_ulcode varchar(15) NULL,
    mbl_inv_stage varchar(30) NULL,
    mbl_cntr_desc varchar(100) NULL,
    mbl_por varchar(60) NULL,
    mbl_cooformat_id int4 NULL,
    mbl_of_sent_on date NULL,
    mbl_coloader_id int4 NULL,
    mbl_customer_id int4 NULL,
    mbl_software_name varchar(15) NULL,
    mbl_it_tot varchar(10) NULL,
    mbl_incoterm varchar(15) NULL,
    mbl_bo_status varchar(15) NULL,
    mbl_bo_attended_code varchar(15) NULL,
    mbl_bo_attended_date date NULL,
    mbl_house_nos varchar(250) NULL,
    mbl_carrier_an_recd_dt date NULL,
    mbl_an_sent_dt date NULL,
    mbl_stage_changed_date date NULL,
    rec_year int4 NULL,     
    rec_version int4 DEFAULT 1 NOT NULL,
    rec_locked text NULL,
    rec_created_by varchar(20) NOT NULL,
    rec_created_date timestamptz NOT NULL,
    rec_edited_by varchar(20) NULL,
    rec_edited_date timestamptz NULL,
    rec_company_id int4 NOT NULL,
    rec_branch_id int4 NOT NULL,

    CONSTRAINT pk_cargo_masterm_mbl_id PRIMARY KEY (mbl_id)
);


DO $$
BEGIN
    -- Check and create index IX_cargo_masterm_mbl_pod_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_pod_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_pod_id" ON cargo_masterm USING btree (mbl_pod_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_pol_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_pol_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_pol_id" ON cargo_masterm USING btree (mbl_pol_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_salesman_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_salesman_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_salesman_id" ON cargo_masterm USING btree (mbl_salesman_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_customer_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_customer_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_customer_id" ON cargo_masterm USING btree (mbl_customer_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_shipper_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_shipper_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_shipper_id" ON cargo_masterm USING btree (mbl_shipper_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_consignee_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_consignee_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_consignee_id" ON cargo_masterm USING btree (mbl_consignee_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_agent_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_agent_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_agent_id" ON cargo_masterm USING btree (mbl_agent_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_liner_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_liner_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_liner_id" ON cargo_masterm USING btree (mbl_liner_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_country_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_country_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_country_id" ON cargo_masterm USING btree (mbl_country_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_ship_term_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_ship_term_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_ship_term_id" ON cargo_masterm USING btree (mbl_ship_term_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_cargo_loc_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_cargo_loc_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_cargo_loc_id" ON cargo_masterm USING btree (mbl_cargo_loc_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_devan_loc_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_devan_loc_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_devan_loc_id" ON cargo_masterm USING btree (mbl_devan_loc_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_pofd_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_pofd_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_pofd_id" ON cargo_masterm USING btree (mbl_pofd_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_handled_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_handled_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_handled_id" ON cargo_masterm USING btree (mbl_handled_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_jobtype_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_jobtype_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_jobtype_id" ON cargo_masterm USING btree (mbl_jobtype_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_coloader_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_coloader_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_coloader_id" ON cargo_masterm USING btree (mbl_coloader_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_cooformat_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_cooformat_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_cooformat_id" ON cargo_masterm USING btree (mbl_cooformat_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_currency_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_currency_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_currency_id" ON cargo_masterm USING btree (mbl_currency_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_vessel_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_vessel_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_vessel_id" ON cargo_masterm USING btree (mbl_vessel_id);
    END IF;

    -- Check and create index IX_cargo_masterm_mbl_shipment_stage_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_mbl_shipment_stage_id') THEN
        CREATE INDEX "IX_cargo_masterm_mbl_shipment_stage_id" ON cargo_masterm USING btree (mbl_shipment_stage_id);
    END IF;

    -- Check and create index IX_cargo_masterm_rec_branch_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_rec_branch_id') THEN
        CREATE INDEX "IX_cargo_masterm_rec_branch_id" ON cargo_masterm USING btree (rec_branch_id);
    END IF;

    -- Check and create index IX_cargo_masterm_rec_company_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_masterm_rec_company_id') THEN
        CREATE INDEX "IX_cargo_masterm_rec_company_id" ON cargo_masterm USING btree (rec_company_id);
    END IF;

END $$;

SELECT setval(pg_get_serial_sequence('cargo_masterm', 'mbl_id'), 
              COALESCE(MAX(mbl_id), 1), 
              true) 
FROM cargo_masterm;