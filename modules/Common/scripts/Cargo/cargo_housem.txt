CREATE TABLE IF NOT EXISTS cargo_housem (
    hbl_id int4 GENERATED BY DEFAULT AS IDENTITY,
    hbl_mbl_id int4 NOT NULL,
    hbl_houseno varchar(60) NOT NULL,
    hbl_date date NULL,
    hbl_bltype varchar(20) NULL,
    hbl_mode varchar(20) NOT NULL,
    hbl_shipper_id int4 NULL,
    hbl_shipper_name varchar(60) NULL,
    hbl_shipper_add1 varchar(60) NULL,
    hbl_shipper_add2 varchar(60) NULL,
    hbl_shipper_add3 varchar(120) NULL,
    hbl_shipper_add4 varchar(120) NULL,
    hbl_shipper_add5 varchar(240) NULL,
    hbl_consignee_id int4 NULL,
    hbl_consignee_name varchar(60) NULL,
    hbl_consignee_add1 varchar(60) NULL,
    hbl_consignee_add2 varchar(60) NULL,
    hbl_consignee_add3 varchar(60) NULL,
    hbl_consignee_add4 varchar(120) NULL,
    hbl_consignee_add5 varchar(240) NULL,
    hbl_notify_id int4 NULL,
    hbl_notify_name varchar(60) NULL,
    hbl_notify_add1 varchar(60) NULL,
    hbl_notify_add2 varchar(60) NULL,
    hbl_notify_add3 varchar(120) NULL,
    hbl_notify_add4 varchar(120) NULL,
    hbl_notify_add5 varchar(240) NULL,
    hbl_agent_id int4 NULL,
    hbl_cha_id int4 NULL,
    hbl_cha_name varchar(60) NULL,
    hbl_cha_attn varchar(60) NULL,
    hbl_cha_tel varchar(60) NULL,
    hbl_cha_fax varchar(60) NULL,
    hbl_location_id int4 NULL,
    hbl_location_name varchar(60) NULL,
    hbl_location_add1 varchar(60) NULL,
    hbl_location_add2 varchar(60) NULL,
    hbl_location_add3 varchar(120) NULL,
    hbl_location_add4 varchar(120) NULL,
    hbl_location_add5 varchar(60) NULL,
    hbl_consigned_to1 varchar(60) NULL,
    hbl_consigned_to2 varchar(60) NULL,
    hbl_consigned_to3 varchar(60) NULL,
    hbl_consigned_to4 varchar(120) NULL,
    hbl_consigned_to5 varchar(120) NULL,
    hbl_ams_fileno varchar(60) NULL,
    hbl_sub_house varchar(60) NULL,
    hbl_it_no varchar(60) NULL,
    hbl_it_date date NULL,
    hbl_it_port varchar(60) NULL,
    hbl_it_pcs int4 NULL,
    hbl_it_wt numeric(14,3) NULL,
    hbl_it_no2 varchar(60) NULL,
    hbl_it_date2 date NULL,
    hbl_it_port2 varchar(60) NULL,
    hbl_it_pcs2 int4 NULL,
    hbl_it_wt2 numeric(14,3) NULL,
    hbl_it_no3 varchar(60) NULL,
    hbl_it_date3 date NULL,
    hbl_it_port3 varchar(60) NULL,
    hbl_it_pcs3 int4 NULL,
    hbl_it_wt3 numeric(14,3) NULL,
    hbl_telex_released varchar(1) NULL,
    hbl_place_delivery varchar(60) NULL,
    hbl_place_final varchar(60) NULL,
    hbl_pld_eta date NULL,
    hbl_plf_eta date NULL,
    hbl_frt_status_id int4 NULL,
    hbl_ship_term_id int4 NULL,
    hbl_uom varchar(10) NULL,
    hbl_pcs int4 NULL,
    hbl_packages int4 NULL,
    hbl_cbm numeric(14,3) NULL,
    hbl_weight numeric(14,3) NULL,
    hbl_chwt numeric(14,3) NULL,
    hbl_lbs numeric(14,3) NULL,
    hbl_cft numeric(14,3) NULL,
    hbl_chwt_lbs numeric(14,3) NULL,
    hbl_commodity varchar(100) NULL,
    hbl_salesman_id int4 NULL,
    hbl_handled_id int4 NULL,
    hbl_isf_no varchar(20) NULL,
    hbl_mov_dad varchar(1) NULL,
    hbl_bl_req varchar(80) NULL,
    hbl_remark1 varchar(80) NULL,
    hbl_remark2 varchar(80) NULL,
    hbl_remark3 varchar(80) NULL,
    hbl_devan_instr1 varchar(100) NULL,
    hbl_devan_instr2 varchar(100) NULL,
    hbl_devan_instr3 varchar(100) NULL,
    hbl_lfd_date date NULL,
    hbl_go_date date NULL,
    hbl_place_receipt varchar(60) NULL,
    hbl_pod_name varchar(60) NULL,
    hbl_pofd_eta date NULL,
    hbl_pofd_id int4 NULL,
    hbl_pofd_name varchar(60) NULL,
    hbl_pol_name varchar(60) NULL,
    hbl_pre_carriage varchar(60) NULL,
    hbl_print_kgs varchar(1) NULL,
    hbl_print_lbs varchar(1) NULL,
    hbl_rate numeric(14,3) NULL,
    hbl_accno varchar(60) NULL,
    hbl_aesno varchar(30) NULL,
    hbl_agent_name varchar(60) NULL,
    hbl_agent_city varchar(60) NULL,
    hbl_asarranged_consignee varchar(1) NULL,
    hbl_asarranged_shipper varchar(1) NULL,
    hbl_by1 varchar(60) NULL,
    hbl_by1_carrier varchar(100) NULL,
    hbl_by2 varchar(60) NULL,
    hbl_by2_carrier varchar(100) NULL,
    hbl_carriage_value varchar(3) NULL,
    hbl_charges1 varchar(100) NULL,
    hbl_charges1_carrier varchar(100) NULL,
    hbl_charges2 varchar(100) NULL,
    hbl_charges2_carrier varchar(100) NULL,
    hbl_charges3 varchar(100) NULL,
    hbl_charges3_carrier varchar(100) NULL,
    hbl_charges4 varchar(100) NULL,
    hbl_charges5 varchar(100) NULL,
    hbl_class varchar(1) NULL,
    hbl_clean varchar(10) NULL,
    hbl_comm varchar(7) NULL,
    hbl_customs_value varchar(3) NULL,
    hbl_exp_ref1 varchar(60) NULL,
    hbl_exp_ref2 varchar(60) NULL,
    hbl_exp_ref3 varchar(60) NULL,
    hbl_exp_ref4 varchar(60) NULL,
    hbl_goods_nature varchar(100) NULL,
    hbl_iata varchar(60) NULL,
    hbl_ins_amt varchar(30) NULL,
    hbl_is_arranged varchar(1) NULL,
    hbl_is_cntrized varchar(1) NULL,
    hbl_issued_by varchar(30) NULL,
    hbl_issued_date date NULL,
    hbl_lcno varchar(60) NULL,
    hbl_oc_status varchar(1) NULL,
    hbl_origin varchar(60) NULL,
    hbl_originals int4 NULL,
    hbl_rout1 varchar(60) NULL,
    hbl_rout2 varchar(60) NULL,
    hbl_rout3 varchar(60) NULL,
    hbl_rout4 varchar(60) NULL,
    hbl_terminal varchar(60) NULL,
    hbl_total numeric(14,3) NULL,
    hbl_type_move varchar(60) NULL,
    hbl_weight_unit varchar(2) NULL,
    hbl_inc_total_wt numeric(14,3) NULL,
    hbl_exp_total_wt numeric(14,3) NULL,
    hbl_revenue_wt numeric(14,3) NULL,
    hbl_inc_total_cbm numeric(14,3) NULL,
    hbl_exp_total_cbm numeric(14,3) NULL,
    hbl_revenue_cbm numeric(14,3) NULL,
    hbl_pickup_date date NULL,
    hbl_empty_ret_date date NULL,
    hbl_obl_slno varchar(10) NULL,
    hbl_obl_telex varchar(25) NULL,
    hbl_careof_id int4 NULL,
    hbl_pono varchar(100) NULL,
    hbl_boeno varchar(60) NULL,
    hbl_format_id int4 NULL,
    hbl_paid_status varchar(30) NULL,
    hbl_bl_status varchar(20) NULL,
    hbl_cargo_release_status varchar(20) NULL,
    hbl_shipment_stage_id int4 NULL,
    hbl_issued_place varchar(50) NULL,
    hbl_draft_format_id int4 NULL,
    rec_files_attached varchar(1) NULL,
    hbl_is_itshipment varchar(1) NULL,
    hbl_book_slno varchar(60) NULL,
    hbl_isf_attached varchar(1) NULL,
    hbl_is_pl varchar(1) NULL,
    hbl_is_ci varchar(1) NULL,
    hbl_is_carr_an varchar(1) NULL,
    hbl_custom_reles_status varchar(20) NULL,
    hbl_is_delivery varchar(1) NULL,
    hbl_paid_remarks varchar(60) NULL,
    hbl_consigned_to6 varchar(60) NULL,
    hbl_delivery_date date NULL,
    hbl_custom_clear_date date NULL,
    hbl_container_tot int4 NULL,
    hbl_incoterm varchar(15) NULL,
    hbl_software_name varchar(15) NULL,
    hbl_an_sent varchar(1) NULL,
    hbl_an_sent_by varchar(15) NULL,
    hbl_an_sent_date date NULL,
    hbl_invoiceno varchar(60) NULL,
    rec_year int4 NULL,     
    rec_version int4 DEFAULT 1 NOT NULL,
    rec_locked text NULL,
    rec_created_by varchar(20) NOT NULL,
    rec_created_date timestamptz NOT NULL,
    rec_edited_by varchar(20) NULL,
    rec_edited_date timestamptz NULL,
    rec_company_id int4 NOT NULL,
    rec_branch_id int4 NOT NULL,

    CONSTRAINT pk_cargo_housem_hbl_id PRIMARY KEY (hbl_id)
);

DO $$ 
BEGIN
    -- Check and create index IX_cargo_housem_hbl_mbl_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_mbl_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_mbl_id" ON cargo_housem USING btree (hbl_mbl_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_shipper_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_shipper_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_shipper_id" ON cargo_housem USING btree (hbl_shipper_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_consignee_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_consignee_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_consignee_id" ON cargo_housem USING btree (hbl_consignee_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_notify_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_notify_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_notify_id" ON cargo_housem USING btree (hbl_notify_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_agent_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_agent_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_agent_id" ON cargo_housem USING btree (hbl_agent_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_cha_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_cha_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_cha_id" ON cargo_housem USING btree (hbl_cha_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_location_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_location_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_location_id" ON cargo_housem USING btree (hbl_location_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_ship_term_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_ship_term_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_ship_term_id" ON cargo_housem USING btree (hbl_ship_term_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_salesman_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_salesman_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_salesman_id" ON cargo_housem USING btree (hbl_salesman_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_handled_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_handled_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_handled_id" ON cargo_housem USING btree (hbl_handled_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_pofd_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_pofd_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_pofd_id" ON cargo_housem USING btree (hbl_pofd_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_frt_status_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_frt_status_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_frt_status_id" ON cargo_housem USING btree (hbl_frt_status_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_shipment_stage_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_shipment_stage_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_shipment_stage_id" ON cargo_housem USING btree (hbl_shipment_stage_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_careof_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_careof_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_careof_id" ON cargo_housem USING btree (hbl_careof_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_format_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_format_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_format_id" ON cargo_housem USING btree (hbl_format_id);
    END IF;

    -- Check and create index IX_cargo_housem_hbl_draft_format_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_hbl_draft_format_id') THEN
        CREATE INDEX "IX_cargo_housem_hbl_draft_format_id" ON cargo_housem USING btree (hbl_draft_format_id);
    END IF;

    -- Check and create index IX_cargo_housem_rec_branch_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_rec_branch_id') THEN
        CREATE INDEX "IX_cargo_housem_rec_branch_id" ON cargo_masterm USING btree (rec_branch_id);
    END IF;

    -- Check and create index IX_cargo_housem_rec_company_id
    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'IX_cargo_housem_rec_company_id') THEN
        CREATE INDEX "IX_cargo_housem_rec_company_id" ON cargo_masterm USING btree (rec_company_id);
    END IF;


END $$;

SELECT setval(pg_get_serial_sequence('cargo_housem', 'hbl_id'), 
              COALESCE(MAX(hbl_id), 1), 
              true) 
FROM cargo_housem;